name: Update Manifests (Komac)
on:
  schedule:
    - cron: '17 * * * *' 
  workflow_dispatch: 

permissions:
  contents: write

jobs:
  update-apps:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        include:
          # ğŸ‘‡ [ì„¤ì •] ì•± ID / ì›ì‘ì ë ˆí¬ / ë‹¤ìš´ë¡œë“œ ì£¼ì†Œ ê·œì¹™ (ë¦¬ë·°ì–´ ë°©ì‹ ì ìš©)
          # ì£¼ì˜: {VERSION} ì´ë¼ê³  ì ìœ¼ë©´ ë´‡ì´ ì•Œì•„ì„œ ìˆ«ìë¡œ ë°”ê¿”ì¤ë‹ˆë‹¤.
          
          # 1. Nvidia Profile Inspector
          - id: Orbmu2k.nvidiaProfileInspector
            repo: Orbmu2k/nvidiaProfileInspector
            # ì‹¤ì œ ë§í¬ê°€ .../download/2.4.0.4/íŒŒì¼.zip í˜•íƒœì„
            url: https://github.com/Orbmu2k/nvidiaProfileInspector/releases/download/{VERSION}/nvidiaProfileInspector.zip

          # 2. VkDiag
          - id: 13xforever.vkdiag
            repo: 13xforever/vkdiag
            # ì‹¤ì œ ë§í¬ê°€ .../download/v1.0.0/íŒŒì¼.exe í˜•íƒœì„ (v ë¶™ì—¬ì•¼ í•¨)
            url: https://github.com/13xforever/vkdiag/releases/download/v{VERSION}/vkdiag.exe

          # 3. Desktop Fences
          - id: limbo666.DesktopFences
            repo: limbo666/DesktopFences
            # ì–˜ë„ v ë¶™ëŠ” í˜•íƒœ
            url: https://github.com/limbo666/DesktopFences/releases/download/v{VERSION}/Fences.exe

    steps:
      - uses: actions/checkout@v4

      - name: Update ${{ matrix.id }}
        # ë¦¬ë·°ì–´ê°€ ê°•ì¶”í•œ ê·¸ ì•¡ì…˜ (ìë™ ê°ì§€ ê¸°ëŠ¥ í¬í•¨)
        uses: michidk/winget-updater@v1
        with:
          identifier: ${{ matrix.id }}
          repo: ${{ matrix.repo }}
          url: ${{ matrix.url }}
          # ì•„ê¹Œ ë§Œë“  í´ë˜ì‹ í† í° í•„ìˆ˜ (ë¦¬ë·°ì–´ ì§€ì ì‚¬í•­ ë°˜ì˜)
          komac-token: ${{ secrets.KOMAC_TOKEN }} 
          
          # ğŸ‘‡ ë‚´ ê°œì¸ ì €ì¥ì†Œì— ë°”ë¡œ ì»¤ë°‹í•´ë¼ (PR ë§Œë“¤ì§€ ë§ê³ )
          target-repo: ${{ github.repository }}
          # (ì°¸ê³ : ì´ ì•¡ì…˜ì€ ê¸°ë³¸ì ìœ¼ë¡œ PRì„ ì„ í˜¸í•˜ì§€ë§Œ, ê°œì¸ ë ˆí¬ì—ì„œëŠ” 
          # Komacì´ ì§ì ‘ ì»¤ë°‹í•˜ë„ë¡ ìœ ë„í•˜ê±°ë‚˜, PRì´ ìƒì„±ë˜ë©´ ë³‘í•©í•˜ë©´ ë©ë‹ˆë‹¤.)
