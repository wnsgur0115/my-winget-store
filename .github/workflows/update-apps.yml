name: Update Manifests (Komac)
on:
  schedule:
    - cron: '17 * * * *'   # Run at 17 minutes past every hour to avoid peak load.
  workflow_dispatch: # Activate manual run button

permissions:
  contents: write
  pull-requests: write

jobs:
  update-apps:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        # ðŸ‘‡ [Add here!!] id, original repo url
        package:
          - { id: Orbmu2k.nvidiaProfileInspector, repo: Orbmu2k/nvidiaProfileInspector }
          - { id: 13xforever.vkdiag, repo: 13xforever/vkdiag }
          - { id: limbo666.DesktopFences, repo: limbo666/DesktopFences }
    steps:
      - uses: actions/checkout@v4

      - name: Update ${{ matrix.package.id }}
        uses: michidk/winget-updater@v1
        with:
          identifier: ${{ matrix.package.id }}
          repo: ${{ matrix.package.repo }}
          komac-token: ${{ secrets.GITHUB_TOKEN }}
